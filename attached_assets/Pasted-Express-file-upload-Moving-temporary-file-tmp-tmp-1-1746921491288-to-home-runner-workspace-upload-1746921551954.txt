Express-file-upload: Moving temporary file /tmp/tmp-1-1746921491288 to /home/runner/workspace/uploads/1746921491510-MyChart-TestDetails.pdf
info: File moved to /home/runner/workspace/uploads/1746921491510-MyChart-TestDetails.pdf {"timestamp":"2025-05-10T23:58:11.517Z"}
info: Lab result saved: {"fileName":"MyChart-TestDetails.pdf","fileSize":93948,"fileUrl":"/uploads/1746921491510-MyChart-TestDetails.pdf","labId":51,"timestamp":"2025-05-10T23:58:11.559Z","userId":1}
info: Background summary generation started for lab ID: {"timestamp":"2025-05-10T23:58:11.560Z"}
info: Processing PDF file: /home/runner/workspace/uploads/1746921491510-MyChart-TestDetails.pdf {"fileName":"MyChart-TestDetails.pdf","fileSize":93948,"timestamp":"2025-05-10T23:58:11.590Z"}
info: Starting biomarker extraction process {"timestamp":"2025-05-10T23:58:11.700Z"}
info: Starting regex extraction with text: {"patterns":["cholesterol","hdl","ldl","triglycerides","vldl","glucose","hemoglobinA1c","insulin","tsh","t4","t3","vitaminD","vitaminB12","folate","ferritin","iron","magnesium","hemoglobin","hematocrit","platelets","alt","ast","alkalinePhosphatase","creatinine","bun","egfr","cortisol","testosterone","estradiol"],"textLength":2507,"textSample":"\n\nName: Benjamin Gregg Cox | DOB: 2/5/1988 | MRN: 1000237659 | PCP: Richard J St Cyr, MD | Legal Name: Benjamin Gregg Cox\nResults\nCOMPREHENSIVE METABOLIC PANEL\nCollected on Jan 07, 2023 10:52 AM\nNew\nSodium\nNormal range: 136 - 145 mmol/L\n136145\n138\nPotassium\nNormal range: 3.5 - 5.1 mmol/L\n3.55.1\n3.4Low\nChloride\nNormal range: 98 - 107 mmol/L\n98107\n100\nCO2,Total\nNormal range: 20 - 31 mmol/L\n2031\n26\nAnion Gap\nNormal range: 5 - 16 mmol/L\n516\n12\nGlucose\nNormal range: 74 - 106 mg/dL\n74106\n256High\nCalci","timestamp":"2025-05-10T23:58:11.700Z"}
info: Found test date with regex: {"date":"2023-01-07T00:00:00.000Z","pattern":"/(?:Date|Collection Date|Report Date|Test Date):\\s*(\\w+\\s+\\d{1,2},?\\s+\\d{4})/i","timestamp":"2025-05-10T23:58:11.701Z"}
info: Found reference range: {"range":"136 - 145 mmol/L\n136145\n138\nPotassium\nNormal range: 3","timestamp":"2025-05-10T23:58:11.701Z"}
info: Regex extraction complete: {"biomarkersFound":[],"successfulExtractions":0,"timestamp":"2025-05-10T23:58:11.706Z","totalMatches":0,"validationFailures":0}
info: Regex extraction results: {"biomarkerCount":0,"biomarkers":[],"timestamp":"2025-05-10T23:58:11.706Z"}
info: Insufficient regex results, attempting LLM extraction {"timestamp":"2025-05-10T23:58:11.706Z"}
info: Starting LLM extraction with text length: {"textLength":2507,"timestamp":"2025-05-10T23:58:11.707Z"}
User deserialized: { userId: 1, timestamp: '2025-05-10T23:58:11.736Z' }
User deserialized: { userId: 1, timestamp: '2025-05-10T23:58:11.803Z' }
info: Retrieved 2 lab results for user 1 {"timestamp":"2025-05-10T23:58:11.849Z"}
